document.addEventListener("page:loaded",()=>{document.querySelectorAll(".post-body :not(a) > img, .post-body > img").forEach(t=>{const a=$(t);t=a.attr("data-src")||a.attr("src");const e=a.wrap(`<a class="fancybox fancybox.image" href="${t}" itemscope itemtype="http://schema.org/ImageObject" itemprop="url"></a>`).parent("a");a.is(".post-gallery img")?e.attr("data-fancybox","gallery").attr("rel","gallery"):a.is(".group-picture img")?e.attr("data-fancybox","group").attr("rel","group"):e.attr("data-fancybox","default").attr("rel","default");t=a.attr("title")||a.attr("alt");t&&(e.next("figcaption").length||e.append(`<p class="image-caption">${t}</p>`),e.attr("title",t).attr("data-caption",t))}),$.fancybox.defaults.hash=!1,$(".fancybox").fancybox({loop:!0,helpers:{overlay:{locked:!1}}})});