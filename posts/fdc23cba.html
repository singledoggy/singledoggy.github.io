<!DOCTYPE html><html lang="en"><head><style type="text/css">.douban-card-block{display:flex;justify-content:center;align-items:center;width:100%;max-height:400px}.douban-card{display:flex;margin:30px 10px;padding:15px;border-radius:15px;position:relative;justify-content:center;align-items:center;overflow:hidden;color:#faebd7;text-decoration:none}.douban-card:hover{text-decoration:none}.douban-card-bgimg{position:absolute;width:115%;height:115%;filter:blur(15px) brightness(.6);background-size:100%;background-position:center;background-repeat:no-repeat}.douban-card-img{position:relative;height:130px;width:80px;background-size:100%;background-position:center;background-repeat:no-repeat}.douban-card-left:hover .douban-card-img{filter:blur(5px) brightness(.6);transform:perspective(800px) rotateX(180deg)}.douban-card-left .douban-card-img{transition:all .5s ease}.douban-card-left{position:relative;display:flex;flex-direction:column;align-items:center}.douban-card-left .douban-card-status{height:130px;width:80px;text-align:center;font-weight:700;position:absolute;left:0;top:30%;transform:rotateX(180deg);backface-visibility:hidden;transition:all .5s ease}.douban-card-left:hover .douban-card-status{transform:perspective(800px) rotateX(0)}.douban-card-right{position:relative;display:flex;flex-direction:column;margin-left:12px;font-size:16px;font-family:"Courier New",Courier,monospace;line-height:1.3;color:#faebd7}.douban-card-item{margin-top:4px}</style><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 5.4.0"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="null//null" crossorigin><link rel="preconnect" href="https://lib.baomitu.com" crossorigin><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=EB+Garamond:300,300italic,400,400italic,700,700italic%7CNoto+Serif+SC:300,300italic,400,400italic,700,700italic%7CLong+Cang:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://lib.baomitu.com/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"samhan.fun","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script><meta name="description" content="¶IO Use glob instead of os 12import globpaths &#x3D; glob.glob(path + &amp;#x27;&#x2F;*.xls&amp;#x27;) ¶Serialization In computing, serialization (US spelling) or serialisation (UK spelling) is the process of translati"><meta property="og:type" content="article"><meta property="og:title" content="python-basic"><meta property="og:url" content="https://samhan.fun/posts/fdc23cba.html"><meta property="og:site_name" content="朝花"><meta property="og:description" content="¶IO Use glob instead of os 12import globpaths &#x3D; glob.glob(path + &amp;#x27;&#x2F;*.xls&amp;#x27;) ¶Serialization In computing, serialization (US spelling) or serialisation (UK spelling) is the process of translati"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2021-11-26T09:03:27.000Z"><meta property="article:modified_time" content="2022-04-06T08:16:00.000Z"><meta property="article:author" content="Sam Han"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://samhan.fun/posts/fdc23cba.html"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://samhan.fun/posts/fdc23cba.html","path":"posts/fdc23cba.html","title":"python-basic"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>python-basic | 朝花</title><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><link rel="alternate" href="/atom.xml" title="朝花" type="application/atom+xml"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">朝花</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">依然璀璨</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fas fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-overview"><a href="/overview/" rel="section"><i class="fas fa-archive fa-fw"></i>Overview</a></li><li class="menu-item menu-item-日常"><a href="/overview/tags/%E6%97%A5%E5%B8%B8/" rel="section"><i class="fas fa-lemon fa-fw"></i>日常</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fas fa-location-arrow fa-fw"></i>About</a></li><li class="menu-item menu-item-photo"><a href="/photo/" rel="section"><i class="fas fa-camera-retro fa-fw"></i>Photo</a></li><li class="menu-item menu-item-favorite"><a href="/Favorite/" rel="section"><i class="fas fa-calendar-check fa-fw"></i>Favorite</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#io"><span class="nav-number">1.</span> <span class="nav-text">IO</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#serialization"><span class="nav-number">2.</span> <span class="nav-text">Serialization</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#typeerror-check"><span class="nav-number">3.</span> <span class="nav-text">TypeError check</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#single-and-double-underscore"><span class="nav-number">4.</span> <span class="nav-text">Single and double underscore</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#single-underscore"><span class="nav-number">4.1.</span> <span class="nav-text">Single Underscore</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#double-underscore-name-mangling"><span class="nav-number">4.2.</span> <span class="nav-text">Double Underscore (Name Mangling)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#example"><span class="nav-number">4.3.</span> <span class="nav-text">Example</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#set-default-parameter-equal-to-another-parameter"><span class="nav-number">5.</span> <span class="nav-text">Set default parameter equal to another parameter</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#code-5"><span class="nav-number">5.1.</span> <span class="nav-text">1 2 3 4 5 6 &gt;&gt;&gt; def foo(arg1, arg2, src, dst&#x3D;None): ... dst &#x3D; dst if dst is not None else src ... print dst ... &gt;&gt;&gt; foo(0, 0, &quot;test&quot;) test</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#floating-point-arithmetic"><span class="nav-number">6.</span> <span class="nav-text">Floating Point Arithmetic</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#format-out"><span class="nav-number">7.</span> <span class="nav-text">Format out</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Sam Han" src="/images/avatar.png"><p class="site-author-name" itemprop="name">Sam Han</p><div class="site-description" itemprop="description">人不知而不愠，不亦君子乎</div></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="mailto:fadedflowers@foxmail.com" title="Email → mailto:fadedflowers@foxmail.com" rel="noopener" target="_blank"><i class="fas fa-envelope fa-fw"></i></a> </span><span class="links-of-author-item"><a href="https://github.com/singledoggy" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;singledoggy" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a> </span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fas fa-rss fa-fw"></i></a></span></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="Back to top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en"><link itemprop="mainEntityOfPage" href="https://samhan.fun/posts/fdc23cba.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="Sam Han"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="朝花"><meta itemprop="description" content="人不知而不愠，不亦君子乎"></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="python-basic | 朝花"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">python-basic</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2021-11-26 17:03:27" itemprop="dateCreated datePublished" datetime="2021-11-26T17:03:27+08:00">2021-11-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2022-04-06 16:16:00" itemprop="dateModified" datetime="2022-04-06T16:16:00+08:00">2022-04-06</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/overview/Code/" itemprop="url" rel="index"><span itemprop="name">Code</span></a></span></span></div></div></header><div class="post-body" itemprop="articleBody"><h1 id="io"><a class="header-anchor" href="#io">¶</a>IO</h1><p>Use glob instead of os</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import <span class="built_in">glob</span></span><br><span class="line">paths = <span class="built_in">glob</span>.<span class="built_in">glob</span>(path + <span class="string">&#x27;/*.xls&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="serialization"><a class="header-anchor" href="#serialization">¶</a>Serialization</h1><p>In computing, serialization (US spelling) or serialisation (UK spelling) is the process of translating a data structure or object state into a format that can be stored (for example, in a file or memory data buffer) or transmitted (for example, over a computer network) and reconstructed later (possibly in a different computer environment)<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><span id="more"></span><p>Here is an example for serialization<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>:</p><p>If you need to save multiple objects, you can simply put them in a single list, or tuple, for instance:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"><span class="comment"># obj0, obj1, obj2 are created here...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Saving the objects:</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;objs.pkl&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:  <span class="comment"># Python 3: open(..., &#x27;wb&#x27;)</span></span><br><span class="line">    pickle.dump([obj0, obj1, obj2], f)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Getting back the objects:</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;objs.pkl&#x27;</span>) <span class="keyword">as</span> f:  <span class="comment"># Python 3: open(..., &#x27;rb&#x27;)</span></span><br><span class="line">    obj0, obj1, obj2 = pickle.load(f)</span><br></pre></td></tr></table></figure><p>If you have a lot of data, you can reduce the file size by passing <code>protocol=-1</code> to <code>dump()</code>; <code>pickle</code> will then use the best available protocol instead of the default historical (and more backward-compatible) protocol. In this case, the file must be opened in binary mode (<code>wb</code> and <code>rb</code>, respectively).</p><p>The binary mode should also be used with Python 3, as its default protocol produces binary (i.e. non-text) data (writing mode <code>'wb'</code> and reading mode <code>'rb'</code>).</p><h1 id="typeerror-check"><a class="header-anchor" href="#typeerror-check">¶</a>TypeError check</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_abs</span>(<span class="params">x</span>):</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(x, (<span class="built_in">int</span>, <span class="built_in">float</span>)):</span><br><span class="line">        <span class="keyword">raise</span> TypeError(<span class="string">&#x27;bad operand type&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> -x</span><br></pre></td></tr></table></figure><h1 id="single-and-double-underscore"><a class="header-anchor" href="#single-and-double-underscore">¶</a>Single and double underscore</h1><h2 id="single-underscore"><a class="header-anchor" href="#single-underscore">¶</a>Single Underscore</h2><p>Names, in a class, with a leading underscore are simply to indicate to other programmers that the attribute or method is intended to be private. However, nothing special is done with the name itself.</p><p>To quote [PEP-8][1]:</p><blockquote><p>_single_leading_underscore: weak “internal use” indicator. E.g. <code>from M import *</code> does not import objects whose name starts with an underscore.</p></blockquote><h2 id="double-underscore-name-mangling"><a class="header-anchor" href="#double-underscore-name-mangling">¶</a>Double Underscore (Name Mangling)</h2><p>From <a target="_blank" rel="noopener" href="https://docs.python.org/3/tutorial/classes.html#private-variables">the Python docs</a>:</p><blockquote><p>Any identifier of the form <code>__spam</code> (at least two leading underscores, at most one trailing underscore) is textually replaced with <code>_classname__spam</code>, where <code>classname</code> is the current class name with leading underscore(s) stripped. This mangling is done without regard to the syntactic position of the identifier, so it can be used to define class-private instance and class variables, methods, variables stored in globals, and even variables stored in instances. private to this class on instances of other classes.</p></blockquote><p>And a warning from the same page:</p><blockquote><p>Name mangling is intended to give classes an easy way to define “private” instance variables and methods, without having to worry about instance variables defined by derived classes, or mucking with instance variables by code outside the class. Note that the mangling rules are designed mostly to avoid accidents; it still is possible for a determined soul to access or modify a variable that is considered private.</p></blockquote><h2 id="example"><a class="header-anchor" href="#example">¶</a>Example</h2><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt;</span> <span class="python"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>():</span></span></span><br><span class="line"><span class="meta">...</span> <span class="python">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span></span><br><span class="line"><span class="meta">...</span> <span class="python">            self.__superprivate = <span class="string">&quot;Hello&quot;</span></span></span><br><span class="line"><span class="meta">...</span> <span class="python">            self._semiprivate = <span class="string">&quot;, world!&quot;</span></span></span><br><span class="line"><span class="meta">...</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt;</span> <span class="python">mc = MyClass()</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt;</span> <span class="python"><span class="built_in">print</span> mc.__superprivate</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">AttributeError: myClass instance has no attribute &#x27;__superprivate&#x27;</span><br><span class="line"><span class="meta">&gt;&gt;&gt;</span> <span class="python"><span class="built_in">print</span> mc._semiprivate</span></span><br><span class="line">, world!</span><br><span class="line"><span class="meta">&gt;&gt;&gt;</span> <span class="python"><span class="built_in">print</span> mc.__dict__</span></span><br><span class="line">&#123;&#x27;_MyClass__superprivate&#x27;: &#x27;Hello&#x27;, &#x27;_semiprivate&#x27;: &#x27;, world!&#x27;&#125;</span><br></pre></td></tr></table></figure><p><sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup><sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></p><h1 id="set-default-parameter-equal-to-another-parameter"><a class="header-anchor" href="#set-default-parameter-equal-to-another-parameter">¶</a>Set default parameter equal to another parameter</h1><p><sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup></p><p>How about this?</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">arg1, arg2, src, dst=<span class="literal">None</span></span>):</span></span><br><span class="line">    dst = dst <span class="keyword">if</span> dst <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> src</span><br></pre></td></tr></table></figure><p>Test:</p><h2 id="code-5"><a class="header-anchor" href="#code-5">¶</a><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt;</span> <span class="python"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">arg1, arg2, src, dst=<span class="literal">None</span></span>):</span></span></span><br><span class="line"><span class="meta">...</span> <span class="python">    dst = dst <span class="keyword">if</span> dst <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> src</span></span><br><span class="line"><span class="meta">...</span> <span class="python">    <span class="built_in">print</span> dst</span></span><br><span class="line"><span class="meta">...</span> </span><br><span class="line"><span class="meta">&gt;&gt;&gt;</span> <span class="python">foo(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;test&quot;</span>)</span></span><br><span class="line">test</span><br></pre></td></tr></table></figure></h2><p>Following @TanveerAlam 's comment, I don’t want to make assumptions about your arguments (what if <code>dst</code> can be <code>False</code>?), I did use shorter versions in my original post and I’ll leave them here for reference:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">arg1, arg2, src, dst=<span class="literal">None</span></span>):</span></span><br><span class="line">    dst = dst <span class="keyword">if</span> dst <span class="keyword">else</span> src</span><br></pre></td></tr></table></figure><p>Or even:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span>(<span class="params">arg1, arg2, src, dst=<span class="literal">None</span></span>):</span></span><br><span class="line">    dst = dst <span class="keyword">or</span> src</span><br></pre></td></tr></table></figure><p>Note that these versions will prevent values other than <code>None</code> in <code>dst</code> (like <code>False</code>, <code>[]</code> …)</p><div class="note primary"><p>Bool value == False<br>🍋 Sequences and Collections:<br>Empty lists [], Empty tuples (), Empty dictionaries {}, Empty sets set(), Empty strings &quot; &quot;, Empty ranges range(0)<br>🍋 Numbers: Zero of any numeric type.<br>Integer: 0, Float: 0.0, Complex: 0j<br>🍋 Constants: None, False</p></div><h1 id="floating-point-arithmetic"><a class="header-anchor" href="#floating-point-arithmetic">¶</a>Floating Point Arithmetic</h1><p>Cited from <sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup></p><p>In the same way, no matter how many base 2 digits you’re willing to use, the decimal value 0.1 cannot be represented exactly as a base 2 fraction. In base 2, 1/10 is the infinitely repeating fraction</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">0</span>.<span class="number">0001100110011001100110011001100110011001100110011</span>...</span><br></pre></td></tr></table></figure><p>Stop at any finite number of bits, and you get an approximation. On most machines today, floats are approximated using a binary fraction with the numerator using the first 53 bits starting with the most significant bit and with the denominator as a power of two. In the case of 1/10, the binary fraction is 3602879701896397 / 2 ** 55 which is close to but not exactly equal to the true value of 1/10.</p><figure class="highlight python-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt;</span> <span class="python"><span class="number">0.1</span></span></span><br><span class="line">0.1000000000000000055511151231257827021181583404541015625</span><br></pre></td></tr></table></figure><p>One illusion may beget another. For example, since 0.1 is not exactly 1/10, summing three values of 0.1 may not yield exactly 0.3, either:</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;</span><br><span class="line">&gt;&gt;&gt; <span class="string">.1</span> + <span class="string">.1</span> + <span class="string">.1</span> == <span class="string">.3</span></span><br><span class="line">False</span><br></pre></td></tr></table></figure><div class="note primary"><p>So, when caculating, we should know the Arithmetic in computer is not the same as human.</p></div><h1 id="format-out"><a class="header-anchor" href="#format-out">¶</a>Format out</h1><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">np.<span class="built_in">array</span><span class="constructor">_str(<span class="params">data</span>, <span class="params">precision</span>=2)</span></span><br><span class="line">np.set<span class="constructor">_printoptions(<span class="params">formatter</span>=&#123;&#x27;<span class="params">float</span>&#x27;: &#x27;&#123;: 0.2f&#125;&#x27;.<span class="params">format</span>&#125;)</span></span><br><span class="line"></span><br><span class="line">np.savetxt(<span class="string">&quot;foo.csv&quot;</span>, a, delimiter=<span class="string">&quot;,&quot;</span>,fmt=&#x27;%.<span class="number">2</span>f&#x27;)</span><br><span class="line"></span><br><span class="line">df.style.format(<span class="string">&quot;&#123;:.2&#125;&quot;</span>)</span><br><span class="line"></span><br><span class="line">df.<span class="keyword">to</span><span class="constructor">_csv(&#x27;<span class="params">estc</span>.<span class="params">csv</span>&#x27;,<span class="params">sep</span>=&#x27;,&#x27;, <span class="params">float_format</span>=&#x27;%.15f&#x27;)</span> # write <span class="keyword">with</span> precision .<span class="number">15</span></span><br></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Serialization">Wiki</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/q/6568007/17149377">https://stackoverflow.com/q/6568007/17149377</a> <a href="#fnref2" class="footnote-backref">↩︎</a></p></li><li id="fn3" class="footnote-item"><p><a target="_blank" rel="noopener" href="http://www.python.org/dev/peps/pep-0008/">http://www.python.org/dev/peps/pep-0008/</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p></li><li id="fn4" class="footnote-item"><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/1301346/what-is-the-meaning-of-single-and-double-underscore-before-an-object-name">https://stackoverflow.com/questions/1301346/what-is-the-meaning-of-single-and-double-underscore-before-an-object-name</a> <a href="#fnref4" class="footnote-backref">↩︎</a></p></li><li id="fn5" class="footnote-item"><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/28805380/python-how-to-set-default-parameter-equal-to-another-parameter">https://stackoverflow.com/questions/28805380/python-how-to-set-default-parameter-equal-to-another-parameter</a> <a href="#fnref5" class="footnote-backref">↩︎</a></p></li><li id="fn6" class="footnote-item"><p><a target="_blank" rel="noopener" href="https://docs.python.org/3/tutorial/floatingpoint.html">https://docs.python.org/3/tutorial/floatingpoint.html</a> <a href="#fnref6" class="footnote-backref">↩︎</a></p></li></ol></section></div><footer class="post-footer"><span style="margin-top:30px;color:var(--blockquote-color);font-size:.85em"><br><span class="post-end-item" title="copyright"><span class="post-end-item-icon" style="margin-right:3px"><i class="fab fa-fw fa-creative-commons"></i> </span><span class="post-end-item-text">Licensed under （CC BY-NC-SA 4.0）</span></span></span><div class="donations"><div class="donation-label">Help Children in China</div><a class="afdian-button" href="https://en.cctf.org.cn/donateen.html" rel="nofollow noopener noreferrer" target="_blank">Donate</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/ccb38171.html" rel="prev" title="NFC"><i class="fa fa-chevron-left"></i> NFC</a></div><div class="post-nav-item"><a href="/posts/feea6fda.html" rel="next" title="Github milestone">Github milestone <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="fas fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Sam Han</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a></div></div></footer><script src="https://lib.baomitu.com/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://lib.baomitu.com/next-theme-pjax/0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script><script src="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="https://lib.baomitu.com/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script><script src="https://lib.baomitu.com/pangu/4.0.7/pangu.min.js" integrity="sha256-j+yj56cdEY2CwkVtGyz18fNybFGpMGJ8JxG3GSyO2+I=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="/js/pjax.js"></script><script src="https://lib.baomitu.com/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script><script src="/js/third-party/search/local-search.js"></script><script src="/js/third-party/fancybox.js"></script><script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.15.3/katex.min.css" integrity="sha256-TThEtR+XalhWKkfF383YLOrI50NGNeIqrzS+q08afrY=" crossorigin="anonymous"><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/assets/umaru.model.json"},display:{position:"right",width:150,height:300},mobile:{show:!1},dialog:{enable:!0},log:!1})</script></body></html>